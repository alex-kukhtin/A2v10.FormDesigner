{"version":3,"file":"formdesigner.min.js","sources":["../../src/components/propsheet.js","../../src/components/taskpad.js","../../src/components/toolbox.js","../../src/components/toolboxitem.js","../../src/components/toolbar.js","../../src/components/elems/placeholder.js","../../src/components/elems/control.js","../../src/components/elems/textbox.js","../../src/components/elems/selector.js","../../src/components/elems/datepicker.js","../../src/components/elems/layoutelem.js","../../src/components/elems/grid.js","../../src/components/elems/item.js","../../src/components/elems/datagrid.js","../../src/components/elems/datagridcolumn.js","../../src/components/elems/label.js","../../src/components/elems/pager.js","../../src/components/elems/toolbar.js","../../src/components/elems/tbbutton.js","../../src/components/elems/aligner.js","../../src/components/elems/line.js","../../src/components/elems/button.js","../../src/components/elems/dlgbuttons.js","../../src/components/container.js"],"sourcesContent":["\r\nconst propsheetTemplate = `\r\n<div class=\"fd-propsheet\">\r\n\t{{item.Is}}\r\n\t<table>\r\n\t\t<tr v-for=\"(p, ix) in itemProps\" :key=ix>\r\n\t\t\t<td v-text=\"p.name\" />\r\n\t\t\t<td>\r\n\t\t\t\t<input v-model.lazy.trim=\"p.value\" />\r\n\t\t\t</td>\r\n\t\t</tr>\t\r\n\t</table>\r\n</div>\r\n`;\r\n\r\n// TODO: ������������� ������� Dialog.Label => Dialog.Title?\r\nconst PROP_MAP = {\r\n\tGrid: ['Rows', 'Columns'],\r\n\tTextBox: [\"Data\", 'Label', 'row', 'col', 'rowSpan', 'colSpan'],\r\n\tSelector: [\"Data\", 'Label', 'row', 'col', 'rowSpan', 'colSpan'],\r\n\tDataGrid: [\"Source\", 'Height', 'row', 'col'],\r\n\tCLabel: [\"Label\", 'row', 'col'],\r\n\tDataGridColumn: [\"Data\", 'Label'],\r\n\tToolbar: [\"row\", 'col'],\r\n\tPager: [\"row\", 'col', 'Data'],\r\n\tDialog: ['Label', 'Width', 'Height'],\r\n\tButton: ['Label', 'Command', \"Parameter\"],\r\n};\r\n\r\nexport default {\r\n\ttemplate: propsheetTemplate,\r\n\tprops: {\r\n\t\titem: Object\r\n\t},\r\n\tcomputed: {\r\n\t\titemProps() {\r\n\t\t\tif (!this.item) return [];\r\n\t\t\tconst type = this.item.Is;\r\n\t\t\tconst props = PROP_MAP[type];\r\n\t\t\tif (!props) return [];\r\n\t\t\treturn props.map(p => {\r\n\t\t\t\tconst item = this.item;\r\n\t\t\t\tconst r = {\r\n\t\t\t\t\tname: p,\r\n\t\t\t\t\tget value() { return item[p]; },\r\n\t\t\t\t\tset value(v) { Vue.set(item, p, v); }\t\r\n\t\t\t\t};\r\n\t\t\t\treturn r;\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t}\r\n};\r\n","\r\nimport toolboxElem from './toolbox';\r\nimport propsheetElem from './propsheet';\r\n\r\nconst taskpadTemplate = `\r\n<div class=\"fd-taskpad\">\r\n\t<ul class=\"fd-tabbar\">\r\n\t\t<li :class=\"{active: activeTab === 'tbox'}\" @click.stop.prevent=\"activeTab = 'tbox'\">Toolbox</li>\r\n\t\t<li :class=\"{active: activeTab === 'props'}\" @click.stop.prevent=\"activeTab = 'props'\">Properties</li>\r\n\t</ul>\r\n\t<toolbox v-if=\"activeTab === 'tbox'\" :fields=fields :cont=cont :components=components />\r\n\t<propsheet v-if=\"activeTab === 'props'\" :item=item  />\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: taskpadTemplate,\r\n\tprops: {\r\n\t\titem: Object,\r\n\t\tfields: Array,\r\n\t\tcomponents: Array,\r\n\t\tcont: Object\r\n\t},\r\n\tcomponents: {\r\n\t\t'toolbox': toolboxElem,\r\n\t\t'propsheet': propsheetElem\r\n\t},\r\n\tdata() { \r\n\t\treturn {\r\n\t\t\tactiveTab: 'tbox'\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tprops() {\r\n\t\t\treturn this.item ? this.item.Props : [];\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t}\r\n};\r\n","\r\nimport toolboxItem from './toolboxitem';\r\n\r\nconst toolboxTemplate = `\r\n<div class=\"fd-toolbox\">\r\n\t<details open>\r\n\t\t<summary>Form Controls</summary>\r\n\t\t<ul>\r\n\t\t\t<toolboxitem v-for=\"(f, ix) in components\" :key=ix :item=f :label=f.Is :cont=cont />\r\n\t\t</ul>\r\n\t</details>\r\n\t<details open>\r\n\t\t<summary>Data</summary>\r\n\t\t<ul>\r\n\t\t\t<toolboxitem v-for=\"(f, ix) in fields\" :key=ix :item=f :label=f.Data :cont=cont />\r\n\t\t</ul>\r\n\t</details>\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: toolboxTemplate,\r\n\tcomponents: {\r\n\t\ttoolboxitem: toolboxItem\r\n\t},\r\n\tprops: {\r\n\t\tfields: Array,\r\n\t\tcomponents: Array,\r\n\t\tcont: Object\r\n\t},\r\n\tcomputed: {\r\n\t},\r\n\tmethods: {\r\n\r\n\t}\r\n};\r\n","\r\nconst toolboxItemTemplate = `\r\n<li class=\"fd-tbox-item\" :draggable=\"true\" @dragstart.stop=dragStart>\r\n\t<i class=\"ico ico-grid\" />\r\n\t<span v-text=label />\r\n</li>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: toolboxItemTemplate,\r\n\tprops: {\r\n\t\ticon: String,\r\n\t\tlabel: String,\r\n\t\titem: Object,\r\n\t\tcont: Object\r\n\t},\r\n\tmethods: {\r\n\t\tdragStart(ev) {\r\n\t\t\tconsole.dir(this.cont);\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t\tev.dataTransfer.effectAllowed = \"move\";\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nconst toolbarTemplate = `\r\n<div class=\"fd-toolbar\">\r\n\tTOOLBAR\r\n\t<button>Delete</button>\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: toolbarTemplate,\r\n\tprops: {\r\n\t\tform: Object\t\r\n\t}\r\n};\r\n","\r\nconst gridPlaceholder = `\r\n<div class=\"fd-grid-ph\" :style=\"style\"\r\n\t@drop=drop @dragover=dragOver @dragenter=dragEnter @dragleave=dragLeave\r\n\t\t:class=\"{hover}\"/>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: gridPlaceholder,\r\n\tprops: {\r\n\t\trow: Number,\r\n\t\tcol: Number,\r\n\t\tcont: Object\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thover: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tstyle() {\r\n\t\t\treturn `grid-area: ${this.row} / ${this.col}`;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tdragOver(ev) {\r\n\t\t\tif (!this.cont.canDrop('grid'))\r\n\t\t\t\treturn;\r\n\t\t\tev.preventDefault();\t\r\n\t\t},\r\n\t\tdragEnter(ev) {\r\n\t\t\t//console.dir(\"drag enter\");\r\n\t\t\tthis.hover = true;\r\n\t\t},\r\n\t\tdragLeave(ev) {\r\n\t\t\t//console.dir(\"drag leave\");\r\n\t\t\tthis.hover = false;\r\n\t\t},\r\n\t\tdrop(ev) {\r\n\t\t\tthis.hover = false;\r\n\t\t\t//let dropData = ev.dataTransfer.getData('text/plain');\r\n\t\t\tthis.cont.drop({row: this.row, col: this.col, grid: this.$parent.item});\r\n\t\t}\r\n\t}\r\n};\r\n","\r\n\r\nexport default {\r\n\tprops: {\r\n\t\titem: Object,\r\n\t\tcont: Object\t\r\n\t}\r\n};\r\n","\r\nimport control from './control.js';\r\n\r\nconst textBoxTemplate = `\r\n<div class=\"control-group\">\r\n<label v-text=\"item.Label\" v-if=\"item.Label\" />\r\n\t<div class=\"input-group\">\r\n\t\t<span v-text=\"item.Data\" class=\"input\" >\r\n\t</div>\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: textBoxTemplate,\r\n\textends: control\r\n};\r\n","\r\nimport control from './control.js';\r\n\r\nconst selectorTemplate = `\r\n<div class=\"control-group\">\r\n<label v-text=\"item.Label\" v-if=\"item.Label\"/>\r\n\t<div class=\"input-group\">\r\n\t\t<span v-text=\"item.Data\" class=\"input\" />\r\n\t\t<a>\r\n\t\t\t<i class=\"ico ico-search\" />\r\n\t\t</a>\r\n\t</div>\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: selectorTemplate,\r\n\textends: control\r\n};\r\n","\r\nimport control from './control.js';\r\n\r\nconst datePickerTemplate = `\r\n<div class=\"control-group\">\r\n\t<label v-text=\"item.Label\" v-if=\"item.Label\"/>\r\n\t<div class=\"input-group\">\r\n\t\t<span v-text=\"item.Data\" class=\"input text-center\"/>\r\n\t\t<a>\r\n\t\t\t<i class=\"ico ico-calendar\" />\r\n\t\t</a>\r\n\t</div>\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: datePickerTemplate,\r\n\textends: control\r\n};\r\n","\r\n\r\nexport default {\r\n\tprops: {\r\n\t\titem: Object,\r\n\t\tcont: Object\t\r\n\t},\r\n\tmethods: {\r\n\t\tselect() {\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tselected() {\r\n\t\t\treturn this.cont.isActive(this.item);\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport gridPlaceholder from './placeholder';\r\nimport gridItem from './item';\r\nimport layoutelem from './layoutelem';\r\n\r\nconst gridTemplate = `\r\n<div class=\"fd-elem-grid\" @click=select :style=gridStyle :class=\"{selected}\">\r\n\t<template v-for=\"row in rows\">\r\n\t\t<fd-grid-ph v-for=\"col in cols\" :row=row :col=\"col\" ref=ph\r\n\t\t\t:key=\"row + ':' + col\" :cont=cont />\r\n\t</template>\r\n\t<fd-grid-item v-for=\"(itm, ix) in item.Items\" :item=itm :key=ix :cont=cont />\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\tname: 'grid',\r\n\textends: layoutelem,\r\n\ttemplate: gridTemplate,\r\n\tcomponents: {\r\n\t\t'fd-grid-ph': gridPlaceholder,\r\n\t\t'fd-grid-item': gridItem\r\n\t},\r\n\tprops: {\r\n\t\titem: Object,\r\n\t\tcont: Object\r\n\t},\r\n\tcomputed: {\r\n\t\tcols() {\r\n\t\t\treturn this.item.Columns.split(' ').map((c, ix) => ix + 1);\r\n\t\t},\r\n\t\trows() {\r\n\t\t\treturn this.item.Rows.split(' ').map((r, ix) => ix + 1);\r\n\t\t},\r\n\t\tgridStyle() {\r\n\t\t\treturn {\r\n\t\t\t\tgridTemplateColumns: this.item.Columns,\r\n\t\t\t\tgridTemplateRows: this.item.Rows\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n};\r\n","import textBox from './textbox';\r\nimport selector from './selector';\r\nimport datePicker from './datepicker';\r\nimport datagrid from './datagrid';\r\nimport pager from './pager';\r\nimport toolbar from './toolbar';\r\nimport label from './label';\r\n\r\nconst gridItem = `\r\n<div class=\"fd-grid-item\" :draggable=\"true\"\r\n\t@dragstart.stop=dragStart @dragend=dragEnd\r\n\t:style=\"style\" @click.stop.prevent=select :class=\"{ selected }\">\r\n\t\t<div class=\"handle\" v-if=hasHandle></div>\r\n\t\t<component :is=\"item.Is\" :item=\"item\" :cont=\"cont\" />\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: gridItem,\r\n\tprops: {\r\n\t\titem: Object,\r\n\t\tcont: Object\r\n\t},\r\n\tcomponents: {\r\n\t\t'TextBox': textBox,\r\n\t\t'Selector': selector,\r\n\t\t'DatePicker': datePicker,\r\n\t\t'DataGrid': datagrid,\r\n\t\t'CLabel': label, \r\n\t\t'Pager': pager,\r\n\t\t'Toolbar': toolbar\r\n\t},\r\n\tcomputed: {\r\n\t\trow() {\r\n\t\t\treturn this.item.row;\r\n\t\t},\r\n\t\tcol() {\r\n\t\t\treturn this.item.col;\r\n\t\t},\r\n\t\trowSpan() {\r\n\t\t\treturn this.item.rowSpan || 1;\r\n\t\t},\r\n\t\tcolSpan() {\r\n\t\t\treturn this.item.colSpan || 1;\r\n\t\t},\r\n\t\tstyle() {\r\n\t\t\treturn `grid-area: ${this.row} / ${this.col} / span ${this.rowSpan} / span ${this.colSpan}`;\r\n\t\t},\r\n\t\tselected() {\r\n\t\t\treturn this.cont.isActive(this.item);\r\n\t\t},\r\n\t\thasHandle() {\r\n\t\t\treturn this.item.Is == 'DataGrid' || this.item.Is === \"Toolbar\";\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tselect() {\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t},\r\n\t\tdragStart(ev) {\r\n\t\t\tconsole.dir('drag start');\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t\tev.dataTransfer.effectAllowed = \"move\";\r\n\t\t\tev.dataTransfer.setData('text/plain', JSON.stringify({ row: this.row, col: this.col}));\r\n\t\t},\r\n\t\tdragEnd() {\r\n\t\t\tconsole.dir('drag end');\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport dataGridColumn from './datagridcolumn.js';\r\n\r\nconst dataGridTemplate = `\r\n<div class=\"fd-datagrid\" @dragover=dragOver @drop=drop >\r\n\t<DataGridColumn v-for=\"(c, ix) in item.Items\" :item=c :key=ix :cont=cont />\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: dataGridTemplate,\r\n\tprops: {\r\n\t\titem: Object,\r\n\t\tcont: Object\r\n\t},\r\n\tcomponents: {\r\n\t\t'DataGridColumn': dataGridColumn\r\n\t},\r\n\tmethods: {\r\n\t\tdragOver(ev) {\r\n\t\t\tev.preventDefault();\r\n\t\t},\r\n\t\tdrop(ev) {\r\n\t\t\talert('drop data grid');\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport layoutItem from './layoutelem.js';\r\n\r\nconst dataGridColumnTemplate = `\r\n<div class=\"fd-datagrid-column\" @click.stop.prevent=\"select\" :class=\"{ selected }\"\r\n\t:draggable=true @dragstart.stop=dragStart>\r\n\t<div v-text=\"item.Label\" class=\"label\" />\r\n\t<div v-text=\"item.Data\" class=\"column\" />\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: dataGridColumnTemplate,\r\n\textends: layoutItem,\r\n\tmethods: {\r\n\t\tdragStart(ev) {\r\n\t\t\tconsole.dir('drag start column');\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t\tev.dataTransfer.effectAllowed = \"move\";\r\n\t\t\tev.dataTransfer.setData('text/plain', JSON.stringify({ row: this.row, col: this.col }));\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport control from './control';\r\n\r\nexport default {\r\n\ttemplate: '<label v-text=\"item.Label\" />',\r\n\textends: control\r\n};\r\n","\r\n\r\nexport default {\r\n\ttemplate: `<div class=\"a2-pager\">\r\n\t\t<button>\r\n\t\t\t<i class=\"ico ico-chevron-left\" />\r\n\t\t</button>\r\n\t\t<button>1</button>\r\n\t\t<button>2</button>\r\n\t\t<button>3</button>\r\n\t\t<button>4</button>\r\n\t\t<button>5</button>\r\n\t\t<span class=\"a2-pager-dots\">...</span>\r\n\t\t<button>8</button>\r\n\t\t<button>\r\n\t\t\t<i class=\"ico ico-chevron-right\" />\r\n\t\t</button>\r\n\t\t<div class=\"a2-pager-divider\" />\r\n\t\t<span class=\"a2-pager-title\">items: <b>1</b>-<b>20</b> of <b>500</b></span>\r\n\t</div>`,\r\n\tprops: {\r\n\t\titem: Object,\r\n\t\tcont: Object\t\r\n\t}\r\n};\r\n","\r\nimport control from \"./control\";\r\nimport button from \"./tbbutton\";\r\nimport aligner from \"./aligner\";\r\n\r\nexport default {\r\n\ttemplate: `<div class=\"toolbar\" @dragover=dragOver @drop=drop >\r\n\t\t<component :is=\"item.Is\" v-for=\"(item, ix) in item.Items\" :item=\"item\" :key=\"ix\" :cont=cont />\r\n\t</div>`,\r\n\textends: control,\r\n\tcomponents: {\r\n\t\t'Button': button,\r\n\t\t'Aligner': aligner\r\n\t},\r\n\tmethods: {\r\n\t\tdragOver(ev) {\r\n\t\t\tev.preventDefault();\r\n\t\t},\r\n\t\tdrop(ev) {\r\n\t\t\talert('drop toolbar');\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport layoutItem from './layoutelem.js';\r\n\r\nconst buttonTemplate = `\r\n<button class=\"btn btn-tb\" @click.stop.prevent=\"select\" :class=\"{ selected }\" :draggable=true\r\n\t\t@dragstart.stop=dragStart >\r\n\t<i class=\"ico\" :class=icon />\r\n\t<span v-if=\"item.Label\" v-text=\"item.Label\" />\t\r\n</button>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: buttonTemplate,\r\n\textends: layoutItem,\r\n\tcomputed: {\r\n\t\ticon() {\r\n\t\t\tswitch (this.item.Command) {\r\n\t\t\t\tcase 'Edit': return 'ico-edit';\r\n\t\t\t\tcase 'New': return 'ico-add';\r\n\t\t\t\tcase 'Delete': return 'ico-clear';\r\n\t\t\t\tcase 'Reload': return 'ico-reload';\r\n\t\t\t}\r\n\t\t\treturn 'ico-menu';\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tdragStart(ev) {\r\n\t\t\tconsole.dir('drag start button');\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t\tev.dataTransfer.effectAllowed = \"move\";\r\n\t\t\tev.dataTransfer.setData('text/plain', this.item.Is);\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport layoutItem from './layoutelem.js';\r\n\r\nconst alignerTemplate = `\r\n<div class=\"aligner\" @click.stop.prevent=\"select\" :class=\"{ selected }\" :draggable=true\r\n\t\t@dragstart.stop=dragStart >\r\n</div>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: alignerTemplate,\r\n\textends: layoutItem,\r\n\tmethods: {\r\n\t\tdragStart(ev) {\r\n\t\t\tconsole.dir('drag start aligner');\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t\tev.dataTransfer.effectAllowed = \"move\";\r\n\t\t\tev.dataTransfer.setData('text/plain', this.item.Is);\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport layoutelem from './layoutelem';\r\n\r\nexport default {\r\n\ttemplate: '<div class=\"line\" @click.stop.prevent=select :class=\"{selected}\"><hr></div>',\r\n\textends: layoutelem\r\n};\r\n","\r\nimport layoutItem from './layoutelem.js';\r\n\r\nconst buttonTemplate = `\r\n<button @click.stop.prevent=\"select\" class=\"btn a2-inline\" :class=\"{ selected, 'btn-primary': item.Primary }\" :draggable=true\r\n\t@dragstart.stop=dragStart v-text=\"item.Label\">\r\n</button>\r\n`;\r\n\r\nexport default {\r\n\ttemplate: buttonTemplate,\r\n\textends: layoutItem,\r\n\tcomputed: {\r\n\t},\r\n\tmethods: {\r\n\t\tdragStart(ev) {\r\n\t\t\tconsole.dir('drag start button');\r\n\t\t\tthis.cont.select(this.item);\r\n\t\t\tev.dataTransfer.effectAllowed = \"move\";\r\n\t\t\tev.dataTransfer.setData('text/plain', this.item.Is);\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport control from \"./control\";\r\nimport button from \"./button\";\r\n\r\nexport default {\r\n\ttemplate: `<div class=\"modal-footer\" @dragover=dragOver @drop=drop >\r\n\t\t<component :is=\"itm.Is\" v-for=\"(itm, ix) in elems\"\r\n\t\t\t:item=\"itm\" :key=\"ix\" :cont=cont />\r\n\t</div>`,\r\n\textends: control,\r\n\tprops: {\r\n\t\telems: Array\r\n\t},\r\n\tcomponents: {\r\n\t\t'Button': button,\r\n\t},\r\n\tmethods: {\r\n\t\tdragOver(ev) {\r\n\t\t\tev.preventDefault();\r\n\t\t},\r\n\t\tdrop(ev) {\r\n\t\t\talert('drop toolbar');\r\n\t\t}\r\n\t}\r\n};\r\n","\r\nimport taskpad from './taskpad';\r\nimport toolbar from './toolbar';\r\nimport gridElem from './elems/grid';\r\nimport lineElem from './elems/line';\r\nimport dlgButtons from './elems/dlgbuttons';\r\n\r\nconst containerTemplate = `\r\n<div class=\"fd-container\" @keyup.self=keyUp tabindex=0 >\r\n\t<fd-toolbar></fd-toolbar>\r\n\t<fd-taskpad :item=selectedItem :fields=fields :cont=cont :components=components />\r\n\t<div class=\"fd-main\" @click.stop.self=clickBody>\r\n\t\t<div class=fd-body  @click.stop.self=clickBody :class=\"bodyClass\" :style=\"bodyStyle\">\r\n\t\t\t<div v-if=\"isDialog\" class=\"modal-header\">\r\n\t\t\t\t<span class=\"modal-title\" v-text=\"form.Label\"/>\r\n\t\t\t\t<button tabindex=\"-1\" class=\"btnclose\">✕</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"fd-content\">\r\n\t\t\t\t<component v-for=\"(itm, ix) in form.Items\" :key=\"ix\" :is=\"itm.Is\"\r\n\t\t\t\t\t:item=\"itm\" :cont=cont />\r\n\t\t\t</div>\r\n\t\t\t<dlg-buttons v-if=\"isDialog\" :elems=\"form.Buttons\" :cont=cont />\r\n\t\t</div>\r\n\t\t<div class=\"fd-page-taskpad\">\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n`;\r\n\r\nfunction isContainer(isElem) {\r\n\treturn isElem === 'Grid';\r\n}\r\n\r\nVue.component('Grid', gridElem);\r\n\r\nVue.component('fd-container', {\r\n\ttemplate: containerTemplate,\r\n\tcomponents: {\r\n\t\t'fd-toolbar': toolbar,\r\n\t\t'fd-taskpad': taskpad,\r\n\t\t'dlg-buttons': dlgButtons,\r\n\t\t'HLine': lineElem\r\n\t},\r\n\tprops: {\r\n\t\tform: Object,\r\n\t\tfields: Array,\r\n\t\tcomponents: Array\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tselectedItem: null\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tcont() {\r\n\t\t\treturn {\r\n\t\t\t\tselect: this.$selectItem,\r\n\t\t\t\tdrop: this.$dropItem,\r\n\t\t\t\tisActive: (itm) => itm === this.selectedItem,\r\n\t\t\t\tcanDrop: this.$canDrop\r\n\t\t\t}\r\n\t\t},\r\n\t\tbodyClass() {\r\n\t\t\treturn this.form.Is.toLowerCase();\r\n\t\t},\r\n\t\tbodyStyle() {\r\n\t\t\tlet el = {};\r\n\t\t\tif (this.isDialog)\r\n\t\t\t\tel.width = this.form.Width;\r\n\t\t\treturn el;\r\n\t\t},\r\n\t\tisDialog() {\r\n\t\t\treturn this.form.Is === 'Dialog';\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tclickBody() {\r\n\t\t\tthis.selectedItem = this.form;\t\r\n\t\t},\r\n\t\tkeyUp(ev) {\r\n\t\t\tconsole.dir(ev.which);\r\n\t\t\tswitch (ev.which) {\r\n\t\t\t\tcase 46: /* del */ this.deleteItem();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteItem() {\r\n\t\t\tif (!this.selectedItem) return;\r\n\t\t\tlet g = this.findGridByItem(this.selectedItem);\r\n\t\t\tif (!g || g.Is !== 'Grid') return;\r\n\t\t\tlet ix = g.Items.indexOf(this.selectedItem);\r\n\t\t\tif (ix < 0) return;\r\n\t\t\tg.Items.splice(ix, 1);\r\n\t\t\tthis.selectedItem = this.form;\r\n\t\t},\r\n\t\tfindGridByItem(tf) {\r\n\t\t\tfunction findInContainer(el, tf) {\r\n\t\t\t\tif (!el || !el.Items) return null;\r\n\t\t\t\tfor (let i = 0; i < el.Items.length; i++) {\r\n\t\t\t\t\tlet x = el.Items[i];\r\n\t\t\t\t\tif (x === tf) return el;\r\n\t\t\t\t\tif (!isContainer(x.Is))\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\tlet res = findInContainer(x, tf);\r\n\t\t\t\t\tif (res) return res;\t\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn findInContainer(this.form, tf);\r\n\t\t},\r\n\t\t$selectItem(item) {\r\n\t\t\tthis.selectedItem = item;\r\n\t\t},\r\n\t\t$canDrop(target) {\r\n\t\t\tlet si = this.selectedItem;\r\n\t\t\tif (!si) return false;\r\n\t\t\tconsole.dir(si.Is);\r\n\t\t\tif (target === 'grid')\r\n\t\t\t\treturn si.Is !== 'Button' && si.Is !== 'DataGridColumn';\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t$dropItem(rc) {\r\n\t\t\tif (!this.selectedItem) return;\r\n\t\t\tconsole.dir(this.selectedItem);\r\n\t\t\tconsole.dir(rc);\r\n\r\n\t\t\tif (!this.selectedItem.row && !this.selectedItem.col) {\r\n\t\t\t\tlet no = Object.assign({}, this.selectedItem);\r\n\t\t\t\tno.Items = [];\r\n\t\t\t\tno.row = rc.row;\t\r\n\t\t\t\tno.col = rc.col;\t\r\n\t\t\t\trc.grid.Items.push(no);\r\n\t\t\t\tthis.selectedItem = no;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// selectedItem может быть новым элементом\t\r\n\t\t\tlet fg = this.findGridByItem(this.selectedItem);\r\n\t\t\tif (fg && fg.Is === 'Grid' && fg !== rc.grid) {\r\n\t\t\t\tlet ix = fg.Items.indexOf(this.selectedItem);\r\n\t\t\t\tfg.Items.splice(ix, 1);\r\n\t\t\t\trc.grid.Items.push(this.selectedItem);\r\n\t\t\t}\r\n\t\t\tthis.selectedItem.row = rc.row;\r\n\t\t\tthis.selectedItem.col = rc.col;\t\t\t\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.selectedItem = this.form;\r\n\t}\r\n});\r\n"],"names":["PROP_MAP","Grid","TextBox","Selector","DataGrid","CLabel","DataGridColumn","Toolbar","Pager","Dialog","Button","taskpad","template","props","item","Object","fields","Array","components","cont","toolbox","toolboxitem","icon","String","label","methods","dragStart","ev","console","dir","this","select","dataTransfer","effectAllowed","computed","propsheet","itemProps","type","Is","map","p","name","value","v","Vue","set","data","activeTab","Props","toolbar$1","form","gridPlaceholder$1","row","Number","col","hover","style","dragOver","canDrop","preventDefault","dragEnter","dragLeave","drop","grid","$parent","control","textBox","extends","selector","datePicker","layoutItem","selected","isActive","gridElem","layoutelem","gridPlaceholder","DatePicker","setData","JSON","stringify","alert","Command","Aligner","rowSpan","colSpan","hasHandle","dragEnd","cols","Columns","split","c","ix","rows","Rows","r","gridStyle","gridTemplateColumns","gridTemplateRows","lineElem","dlgButtons","elems","component","toolbar","HLine","selectedItem","$selectItem","$dropItem","itm","$canDrop","bodyClass","toLowerCase","bodyStyle","el","isDialog","width","Width","clickBody","keyUp","which","deleteItem","g","findGridByItem","Items","indexOf","splice","tf","findInContainer","i","length","x","res","target","si","rc","no","assign","push","fg","mounted"],"mappings":"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"}